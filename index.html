<!doctype html>
<html>
	<head>
		<title>Icon Gallery</title>
		<script type="importmap">
			{
				"imports": {
					"vanilla-kit": "https://cdn.jsdelivr.net/gh/erickmerchant/vanilla-kit@~2.3.0/lib.min.js"
				}
			}
		</script>
		<style>
			* {
				box-sizing: border-box;
				margin: 0;
				padding: 0;
				font: inherit;
				max-inline-size: 100%;
			}

			html {
				block-size: 100%;
				font-family: system-ui, "Helvetica", sans-serif;
			}

			body {
				block-size: 100%;
				display: grid;
				place-content: center;
				gap: 1rem;
			}

			svg-icon-set {
				display: flex;
				flex-wrap: wrap;
				gap: 1rem;

				:where(h1, h2, h3, h4, h5, h6) {
					font-weight: 800;
					font-size: 1.5em;
					inline-size: 100%;
				}

				:where(:popover-open) {
					background: oklch(60% 0.2 150);
					color: white;
					border: none;
					border-radius: 0.25rlh;
					padding: 1em;
					display: flex;
					gap: 0.5em;
					font-weight: 500;
					position: fixed;
					inset: 1em;

					@supports (anchor-name: --svg-icon--clicked) {
						position: absolute;
						position-anchor: --svg-icon--clicked;
						top: calc(anchor(top) + 0.25em);
						left: calc(anchor(left) + 0.25em);
						padding: 0.5em;
						font-size: 0.8em;
					}
				}

				:where(button) {
					background: hsl(0 0 0 / 0);
					border-color: hsl(0 0 0 / 0);
					border-radius: 0.125rem;
					outline: 0.125rem solid
						color-mix(in lch, currentcolor 15%, hsl(0 0% 0% / 0));
					block-size: 7lh;
					padding: 0.25lh;

					&:where(.clicked) {
						anchor-name: --svg-icon--clicked;
					}
				}

				:where(svg) {
					block-size: 100%;
				}
			}
		</style>
		<script type="module">
			import {html, watch, $} from "vanilla-kit";

			let {div, span} = html;

			class SVGIconSet extends HTMLElement {
				#timeout;
				#popover;
				#state = watch({
					clicked: null,
				});

				connectedCallback() {
					for (let button of this.querySelectorAll("button")) {
						$(button)
							.on("click", this.onCopyIcon)
							.classes({
								clicked: () => {
									return this.#state.clicked === button;
								},
							});
					}

					this.#popover = div()
						.attr("popover", true)
						.children(span().children("✔︎"), "Copied");

					$(this).children(this.#popover);
				}

				onCopyIcon = async (e) => {
					this.#state.clicked = e.currentTarget;

					this.#popover.element?.showPopover();

					if (this.#timeout) {
						clearTimeout(this.#timeout);
					}

					this.#timeout = setTimeout(() => {
						this.#state.clicked = null;

						this.#popover.element?.hidePopover();
					}, 2000);

					try {
						await navigator.clipboard.writeText(
							this.#state.clicked?.innerHTML?.trim?.()
						);
					} catch (_) {}
				};
			}

			window.customElements.define("svg-icon-set", SVGIconSet);
		</script>
	</head>
	<body>
		<svg-icon-set>
			<h1>Web</h1>
			<button>
				<svg viewBox="0 0 28 28">
					<title>Edit</title>
					<path
						d="M9 1 Q10 0 11 1 L15 5 L5 15 L1 11 Q0 10 1 9 Z M17 7 L28 18 V28 H18 L7 17 Z"></path>
				</svg>
			</button>
			<button>
				<svg viewBox="0 0 20 28">
					<title>Pinned</title>
					<path
						d="M2 1 Q2 0 3 0 H17 Q18 0 18 1 V2 L15 5 V13 L20 16 V17 Q20 18 19 18 H1 Q0 18 0 17 V16 L5 13 V5 L2 2 V2 Z M7 20 V24 L10 28 L13 24 V20 Z"></path>
				</svg>
			</button>
			<button>
				<svg viewBox="0 0 20 24">
					<title>Date</title>
					<path
						d="M0 6 Q0 4 2 4 H3 V2 Q3 0 5 0 Q7 0 7 2 V4 H13 V2 Q13 0 15 0 Q17 0 17 2 V4 H18 Q20 4 20 6 V10 V22 Q20 24 18 24 H2 Q0 24 0 22 V21 H17 V12 H3 V21 H0 Z"></path>
				</svg>
			</button>
			<button>
				<svg viewBox="0 0 28 28">
					<title>Delete</title>
					<path
						d="M5 1 Q6 0 7 1 L14 8 L21 1 Q22 0 23 1 L27 5 Q28 6 27 7 L20 14 L27 21 Q28 22 27 23 L23 27 Q22 28 21 27 L14 20 L7 27 Q6 28 5 27 L1 23 Q0 22 1 21 L8 14 L1 7 Q0 6 1 5 Z"></path>
				</svg>
			</button>
			<button>
				<svg viewBox="0 0 28 28">
					<title>Edit</title>
					<path
						d="M19 1 Q18 0 17 1 L13 5 L23 15 L27 11 Q28 10 27 9 Z M11 7 L0 18 V28 H10 L21 17 Z"></path>
				</svg>
			</button>
			<button>
				<svg viewBox="0 0 28 28">
					<title>RSS</title>
					<path
						d="M0 24 A4 4 0 1 1 8 24 A4 4 0 1 1 0 24 Z M0 0 Q28 0 28 28 H22 Q22 6 0 6 Z M0 10 Q18 10 18 28 H12 Q12 16 0 16 Z"></path>
				</svg>
			</button>
		</svg-icon-set>
	</body>
</html>
