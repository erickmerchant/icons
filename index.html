<!doctype html>
<html>
	<head>
		<title>Icon Gallery</title>
		<script type="module">
			class SVGIconSet extends HTMLElement {
				#timeout;
				#popover;

				connectedCallback() {
					for (let button of this.querySelectorAll("button")) {
						button.addEventListener("click", (e) => {
							this.dispatchEvent(new CustomEvent("copy", {detail: {button}}));
						});

						this.addEventListener("copy", async (e) => {
							let clicked = e.detail?.button === button;

							button.classList.toggle("clicked", clicked);

							if (!clicked) {
								return;
							}

							this.#popover?.showPopover();

							if (this.#timeout) {
								clearTimeout(this.#timeout);
							}

							this.#timeout = setTimeout(() => {
								this.dispatchEvent(
									new CustomEvent("copy", {detail: {button: null}})
								);

								this.#popover?.hidePopover();
							}, 2_000);

							try {
								await navigator.clipboard.writeText(button.innerHTML?.trim?.());
							} catch (_) {}
						});
					}

					let div = document.createElement("div");
					let span = document.createElement("span");
					let checkIcon = this.querySelector('[data-icon="check"]').cloneNode(
						true
					);

					div.toggleAttribute("popover", true);
					span.append("Copied");
					div.append(checkIcon, span);
					this.append(div);

					this.#popover = div;
				}
			}

			window.customElements.define("svg-icon-set", SVGIconSet);
		</script>
		<style>
			* {
				box-sizing: border-box;
				margin: 0;
				padding: 0;
				font: inherit;
				max-inline-size: 100%;
			}

			html {
				block-size: 100%;
				font-family: system-ui, sans-serif;
			}

			body {
				block-size: 100%;
				display: grid;
				place-content: center safe;
				grid-template-columns: auto auto auto;
				grid-template-rows: auto max-content auto;
				gap: 1rem;
			}

			svg-icon-set {
				grid-column: 2;
				grid-row: 2;
				display: flex;
				flex-wrap: wrap;
				gap: 1rem;

				:where(h1, h2, h3, h4, h5, h6) {
					font-weight: 800;
					font-size: 1.5em;
					inline-size: 100%;
				}

				:where(:popover-open) {
					background: oklab(60% -0.4 0.2);
					color: white;
					border: none;
					border-radius: 0.25rlh;
					padding: 1em;
					display: flex;
					flex-direction: row;
					gap: 0.5em;
					font-weight: 500;
					position: fixed;
					inset: 1em;

					:where(svg) {
						block-size: 1lh;
						flex-shrink: 0;
						fill: currentColor;
					}

					@supports (anchor-name: --svg-icon--clicked) {
						position: absolute;
						position-anchor: --svg-icon--clicked;
						top: calc(anchor(top) + 0.25em);
						left: calc(anchor(left) + 0.25em);
						padding: 0.5em;
						font-size: 0.8em;
					}
				}

				:where(button) {
					background: hsl(0 0 0 / 0);
					border-color: hsl(0 0 0 / 0);
					border-radius: 0.125rem;
					outline: 0.125rem solid
						color-mix(in lch, currentcolor 15%, hsl(0 0% 0% / 0));
					block-size: 7lh;
					padding: 0.25lh;

					&:where(.clicked) {
						anchor-name: --svg-icon--clicked;
					}

					:where(svg) {
						block-size: 100%;
					}
				}

			}
		</style>
	</head>
	<body>
		<svg-icon-set>
			<h1>Web</h1>
			<button>
				<svg viewBox="0 0 28 28">
					<title>Edit</title>
					<path
						d="M9 1 Q10 0 11 1 L15 5 L5 15 L1 11 Q0 10 1 9 Z M17 7 L28 18 V28 H18 L7 17 Z"></path>
				</svg>
			</button>
			<button>
				<svg viewBox="0 0 20 24">
					<title>Pinned</title>
					<path
						d="M2 1 Q2 0 3 0 H17 Q18 0 18 1 V2 L15 5 V9 L20 12 V13 Q20 14 19 14 H1 Q0 14 0 13 V12 L5 9 V5 L2 2 V2 Z M7 16 V20 L10 24 L13 20 V16 Z"></path>
				</svg>
			</button>
			<button>
				<svg viewBox="0 0 20 24">
					<title>Date</title>
					<path
						d="M0 6 Q0 4 2 4 H3 V2 Q3 0 5 0 T7 2 V4 H13 V2 Q13 0 15 0 T17 2 V4 H18 Q20 4 20 6 V10 V22 Q20 24 18 24 H2 Q0 24 0 22 V21 H17 V11 H3 V21 H0 Z"></path>
				</svg>
			</button>
			<button>
				<svg viewBox="0 0 28 28">
					<title>Delete</title>
					<path
						d="M5 1 Q6 0 7 1 L14 8 L21 1 Q22 0 23 1 L27 5 Q28 6 27 7 L20 14 L27 21 Q28 22 27 23 L23 27 Q22 28 21 27 L14 20 L7 27 Q6 28 5 27 L1 23 Q0 22 1 21 L8 14 L1 7 Q0 6 1 5 Z"></path>
				</svg>
			</button>
			<button>
				<svg viewBox="0 0 28 28">
					<title>Edit</title>
					<path
						d="M19 1 Q18 0 17 1 L13 5 L23 15 L27 11 Q28 10 27 9 Z M11 7 L0 18 V28 H10 L21 17 Z"></path>
				</svg>
			</button>
			<button>
				<svg viewBox="0 0 28 28">
					<title>RSS</title>
					<path
						d="M0 24 A4 4 0 1 1 8 24 A4 4 0 1 1 0 24 Z M0 11 Q0 10 1 10 Q18 10 18 27 Q18 28 17 28 H13 Q12 28 12 27 Q12 16 1 16 Q0 16 0 15 Z M0 1 Q0 0 1 0 Q28 0 28 27 Q28 28 27 28 H23 Q22 28 22 27 Q22 6 1 6 Q0 6 0 5 Z"></path>
				</svg>
			</button>
			<button>
				<svg viewBox="0 0 34 28" data-icon="check">
					<title>Check</title>
					<path
						d="M27 1 Q28 0 29 1 L33 5 Q34 6 33 7 L13 27 Q12 28 11 27 L1 17 Q0 16 1 15 L5 11 Q6 10 7 11 L12 16 Z"></path>
				</svg>
			</button>
			<button>
				<svg viewBox="0 0 28 28">
					<title>Folder</title>
					<path
						d="M0 2 Q0 0 2 0 H10 Q11 0 12 1 L14 4 H26 Q28 4 28 6 V26 Q28 28 26 28 H2 Q0 28 0 26 V14 H4 V24 H24 V8 H4 V14 H0 Z"></path>
				</svg>
			</button>
		</svg-icon-set>
	</body>
</html>
